# 基础知识
在构造函数中申请分配资源，在析构函数中释放资源。因为C++的语言机制保证了，当一个对象创建的时候，自动调用构造函数，当对象超出作用域的时候会自动调用析构函数。所以，在RAII（资源获取即初始化）的指导下，我们应该使用类来管理资源，将资源和对象的生命周期绑定

-- 锁机制的功能
实现多线程同步，通过锁机制，确保任一时刻只能有一个线程能进入关键代码段.
> * 信号量
信号量是一种特殊的变量，它只能取自然数值并且只支持两种操作：等待(P)和信号(V).假设有信号量SV，对其的P、V操作如下：
-- P，如果SV的值大于0，则将其减一；若SV的值为0，则挂起执行
-- V，如果有其他进行因为等待SV而挂起，则唤醒；若没有，则将SV值加一
> * 互斥锁
互斥锁,也成互斥量,可以保护关键代码段,以确保独占式访问.当进入关键代码段,获得互斥锁将其加锁;离开关键代码段,唤醒等待该互斥锁的线程.
> * 条件变量
条件变量提供了一种线程间的通知机制,当某个共享数据达到某个值时,唤醒等待这个共享数据的线程.
| 参数       | 含义                          |
| --------- | ------------------            |
| `sem`     | 要初始化的信号量对象地址          |
| `pshared` | 0表示线程间共享，非0表示进程间共享  |
| `value`   | 信号量的初始计数，表示可用资源数量  |
class sem
{
public:
    sem()
    {
        if (sem_init(&m_sem, 0, 0) != 0)
        {
            //“信号量初始化失败”，你可以捕获它来做相应处理，比如日志记录、程序退出或者重试。
            throw std::exception();
        }
    }
};